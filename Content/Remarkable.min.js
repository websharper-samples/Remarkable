function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB;a=self;b=a.Samples=a.Samples||{};c=b.HelloWorld=b.HelloWorld||{};d=a.StartupCode$Remarkable$Client=a.StartupCode$Remarkable$Client||{};e=a.WebSharper=a.WebSharper||{};f=e.Obj=e.Obj||{};g=e.UI=e.UI||{};h=g.Var$1=g.Var$1||{};i=e.Operators=e.Operators||{};j=g.HtmlModule=g.HtmlModule||{};k=j.attr=j.attr||{};l=g.Var=g.Var||{};m=g.ConcreteVar=g.ConcreteVar||{};n=g.Snap=g.Snap||{};o=g.Doc=g.Doc||{};p=e.JavaScript=e.JavaScript||{};q=p.Pervasives=p.Pervasives||{};r=g.AttrProxy=g.AttrProxy||{};s=g.AttrModule=g.AttrModule||{};t=g.Client=g.Client||{};u=t.Templates=t.Templates||{};v=g.Abbrev=g.Abbrev||{};w=v.Fresh=v.Fresh||{};x=g.View=g.View||{};y=g.DomUtility=g.DomUtility||{};z=e.Seq=e.Seq||{};A=g.Attrs=g.Attrs||{};B=a.EventTarget;C=a.Node;D=p.JS=p.JS||{};E=e.Collections=e.Collections||{};F=E.Dictionary=E.Dictionary||{};G=e.Unchecked=e.Unchecked||{};H=e.Enumerator=e.Enumerator||{};I=H.T=H.T||{};J=g.DynamicAttrNode=g.DynamicAttrNode||{};K=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};L=e.Arrays=e.Arrays||{};M=E.HashSet=E.HashSet||{};N=a.WindowOrWorkerGlobalScope;O=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};P=g.Docs=g.Docs||{};Q=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};R=g.Elt=g.Elt||{};S=g.Array=g.Array||{};T=g.DocElemNode=g.DocElemNode||{};U=a.CharacterData;V=E.DictionaryUtil=E.DictionaryUtil||{};W=a.Object;X=u.Prepare=u.Prepare||{};Y=e.Slice=e.Slice||{};Z=E.KeyCollection=E.KeyCollection||{};_0=g.An=g.An||{};_1=t.Settings=t.Settings||{};_2=v.Mailbox=v.Mailbox||{};_3=g.Updates=g.Updates||{};_4=e.List=e.List||{};_5=_4.T=_4.T||{};_6=t.Attrs=t.Attrs||{};_7=_6.Dyn=_6.Dyn||{};_8=e.Strings=e.Strings||{};_9=t.Docs=t.Docs||{};_=_9.RunState=_9.RunState||{};$=_9.NodeSet=_9.NodeSet||{};ba=g.Anims=g.Anims||{};bb=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bc=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bd=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};be=e.Concurrency=e.Concurrency||{};bf=g.AppendList=g.AppendList||{};bg=g.Easing=g.Easing||{};bh=be.AsyncBody=be.AsyncBody||{};bi=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bj=be.CT=be.CT||{};bk=v.HashSet=v.HashSet||{};bl=E.HashSetUtil=E.HashSetUtil||{};bm=be.Scheduler=be.Scheduler||{};bn=e.CancellationTokenSource=e.CancellationTokenSource||{};bo=_9.DomNodes=_9.DomNodes||{};bp=e.Queue=e.Queue||{};bq=a.Error;br=e.OperationCanceledException=e.OperationCanceledException||{};bs=e.Lazy=e.Lazy||{};bt=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bu=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};bv=bu.LazyRecord=bu.LazyRecord||{};bw=a.PR;bx=a.IntelliFactory;by=bx&&bx.Runtime;bz=a.console;bA=a.jQuery;bB=a.Date;c.Main=function(){d.$cctor();return d.Main;};d.$cctor=function(){var bC,bD,bE,bF;d.$cctor=a.ignore;d.Main=(bC=new a.Remarkable((bD={},bD.linkify=true,bD.typographer=true,bD.langPrefix="prettyprint linenums lang-",bD)),(bE=h.Create$1("```fsharp\nlet x = 0\nlet f a = a*2\nf x\n```"),(bF=o.Element("div",[],[o.Element("p",[],[o.TextNode("Type markdown text here:")]),o.InputArea([r.Create("class","input"),r.Create("rows","20"),r.Create("value","# Hello world!")],bE),o.Element("hr",[],[]),o.Element("h4",[],[o.TextNode("Result")]),o.Element("div",[r.Create("id","output"),r.Create("class","output"),s.DynamicCustom(function(){return function(bG){var bH,bI;bH=a.jQuery("#output").empty();bI=bC.render(bG);bH.append.apply(bH,[bI]);return bw.prettyPrint();};},bE.get_View())],[])]),(u.LoadLocalTemplates(""),o.RunById("main",bF)))));};f=e.Obj=by.Class({Equals:function(bC){return this===bC;},GetHashCode:function(){return -1;}},null,f);f.New=by.Ctor(function(){},f);h=g.Var$1=by.Class({},f,h);h.Create$1=function(bC){return new m.New(false,n.New({$:2,$0:bC,$1:[]}),bC);};i.FailWith=function(bC){throw new bq(bC);};i.KeyValue=function(bC){return[bC.K,bC.V];};k=j.attr=by.Class({},f,k);l=g.Var=by.Class({},f,l);l.New=by.Ctor(function(){f.New.call(this);},l);m=g.ConcreteVar=by.Class({get_View:function(){return this.view;},UpdateMaybe:function(bC){var bD;bD=bC(this.Get());bD!=null&&bD.$==1?this.Set(bD.$0):void 0;},Get:function(){return this.current;},Set:function(bC){if(this.isConst)(function(bD){return bD("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bD){bz.log(bD);}));else{n.Obsolete(this.snap);this.current=bC;this.snap=n.New({$:2,$0:bC,$1:[]});}}},l,m);m.New=by.Ctor(function(bC,bD,bE){var bF;bF=this;l.New.call(this);this.isConst=bC;this.current=bE;this.snap=bD;this.view=function(){return bF.snap;};this.id=w.Int();},m);n.Map=function(bC,bD){var bE,bF;bE=bD.s;return bE!=null&&bE.$==0?n.New({$:0,$0:bC(bE.$0)}):(bF=n.New({$:3,$0:[],$1:[]}),(n.When(bD,function(bG){n.MarkDone(bF,bD,bC(bG));},bF),bF));};n.WhenRun=function(bC,bD,bE){var bF;bF=bC.s;bF==null?bE():bF!=null&&bF.$==2?(bF.$1.push(bE),bD(bF.$0)):bF!=null&&bF.$==3?(bF.$0.push(bD),bF.$1.push(bE)):bD(bF.$0);};n.Copy=function(bC){var bD,bE,bF;bD=bC.s;return bD==null?bC:bD!=null&&bD.$==2?(bE=n.New({$:2,$0:bD.$0,$1:[]}),(n.WhenObsolete(bC,bE),bE)):bD!=null&&bD.$==3?(bF=n.New({$:3,$0:[],$1:[]}),(n.When(bC,function(bG){n.MarkDone(bF,bC,bG);},bF),bF)):bC;};n.WhenObsoleteRun=function(bC,bD){var bE;bE=bC.s;bE==null?bD():bE!=null&&bE.$==2?bE.$1.push(bD):bE!=null&&bE.$==3?bE.$1.push(bD):void 0;};n.Map2Unit=function(bC,bD){var bE,bF,bG;function bH(){var bI,bJ,bK;if(!(bI=bG.s,bI!=null&&bI.$==0||bI!=null&&bI.$==2)){bJ=n.ValueAndForever(bC);bK=n.ValueAndForever(bD);bJ!=null&&bJ.$==1?bK!=null&&bK.$==1?bJ.$0[1]&&bK.$0[1]?n.MarkForever(bG,null):n.MarkReady(bG,null):void 0:void 0;}}bE=bC.s;bF=bD.s;return bE!=null&&bE.$==0?bF!=null&&bF.$==0?n.New({$:0,$0:null}):bD:bF!=null&&bF.$==0?bC:(bG=n.New({$:3,$0:[],$1:[]}),(n.When(bC,bH,bG),n.When(bD,bH,bG),bG));};n.When=function(bC,bD,bE){var bF;bF=bC.s;bF==null?n.Obsolete(bE):bF!=null&&bF.$==2?(n.EnqueueSafe(bF.$1,bE),bD(bF.$0)):bF!=null&&bF.$==3?(bF.$0.push(bD),n.EnqueueSafe(bF.$1,bE)):bD(bF.$0);};n.MarkDone=function(bC,bD,bE){var bF;if(bF=bD.s,bF!=null&&bF.$==0)n.MarkForever(bC,bE);else n.MarkReady(bC,bE);};n.WhenObsolete=function(bC,bD){var bE;bE=bC.s;bE==null?n.Obsolete(bD):bE!=null&&bE.$==2?n.EnqueueSafe(bE.$1,bD):bE!=null&&bE.$==3?n.EnqueueSafe(bE.$1,bD):void 0;};n.ValueAndForever=function(bC){var bD;bD=bC.s;return bD!=null&&bD.$==0?{$:1,$0:[bD.$0,true]}:bD!=null&&bD.$==2?{$:1,$0:[bD.$0,false]}:null;};n.MarkForever=function(bC,bD){var bE,bF,bG,bH;bE=bC.s;if(bE!=null&&bE.$==3){bC.s={$:0,$0:bD};bF=bE.$0;for(bG=0,bH=L.length(bF)-1;bG<=bH;bG++)(L.get(bF,bG))(bD);}else void 0;};n.MarkReady=function(bC,bD){var bE,bF,bG,bH;bE=bC.s;if(bE!=null&&bE.$==3){bC.s={$:2,$0:bD,$1:bE.$1};bF=bE.$0;for(bG=0,bH=L.length(bF)-1;bG<=bH;bG++)(L.get(bF,bG))(bD);}else void 0;};n.EnqueueSafe=function(bC,bD){var bE,bF,bG,bH;bC.push(bD);if(bC.length%20===0){bE=bC.slice(0);bp.Clear(bC);for(bF=0,bG=L.length(bE)-1;bF<=bG;bF++){bH=L.get(bE,bF);typeof bH=="object"?function(bI){if(bI.s)bC.push(bI);}(bH):function(bI){bC.push(bI);}(bH);}}else void 0;};o=g.Doc=by.Class({},f,o);o.TextNode=function(bC){return o.Mk({$:5,$0:y.CreateText(bC)},x.Const());};o.InputArea=function(bC,bD){return o.InputInternal("textarea",function(){return z.append(bC,[s.Value(bD)]);});};o.RunById=function(bC,bD){var bE;bE=y.Doc().getElementById(bC);G.Equals(bE,null)?i.FailWith("invalid id: "+bC):o.Run(bE,bD);};o.Element=function(bC,bD,bE){var bF,bG;bF=r.Concat(bD);bG=o.Concat(bE);return R.New(y.CreateElement(bC),bF,bG);};o.Mk=function(bC,bD){return new o.New(bC,bD);};o.InputInternal=function(bC,bD){var bE;bE=y.CreateElement(bC);return R.New(bE,r.Concat(bD(bE)),o.get_Empty());};o.Run=function(bC,bD){P.LinkElement(bC,bD.docNode);o.RunInPlace(false,bC,bD);};o.Concat=function(bC){var bD;bD=S.ofSeqNonCopying(bC);return S.TreeReduce(o.get_Empty(),o.Append,bD);};o.get_Empty=function(){return o.Mk(null,x.Const());};o.RunInPlace=function(bC,bD,bE){var bF;bF=P.CreateRunState(bD,bE.docNode);x.Sink(_0.get_UseAnimations()||_1.BatchUpdatesEnabled()?_2.StartProcessor(P.PerformAnimatedUpdate(bC,bF,bE.docNode)):function(){P.PerformSyncUpdate(bC,bF,bE.docNode);},bE.updates);};o.Append=function(bC,bD){return o.Mk({$:0,$0:bC.docNode,$1:bD.docNode},x.Map2Unit(bC.updates,bD.updates));};o.New=by.Ctor(function(bC,bD){f.New.call(this);this.docNode=bC;this.updates=bD;},o);q.NewFromSeq=function(bC){var bD,bE,bF;bD={};bE=H.Get(bC);try{while(bE.MoveNext()){bF=bE.Current();bD[bF[0]]=bF[1];}}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}return bD;};r=g.AttrProxy=by.Class({},null,r);r.Create=function(bC,bD){return A.Static(function(bE){y.SetAttr(bE,bC,bD);});};r.Concat=function(bC){var bD;bD=S.ofSeqNonCopying(bC);return S.TreeReduce(A.EmptyAttr(),r.Append,bD);};r.Append=function(bC,bD){return A.AppendTree(bC,bD);};s.DynamicCustom=function(bC,bD){return A.Dynamic(bD,bC);};s.Value=function(bC){function bD(bE){return{$:1,$0:bE};}return s.CustomValue(bC,a.id,function(bE){return bD(a.id(bE));});};s.CustomValue=function(bC,bD,bE){return s.CustomVar(bC,function(bF,bG){bF.value=bD(bG);},function(bF){return bE(bF.value);});};s.CustomVar=function(bC,bD,bE){function bF(bH,bI){return bC.UpdateMaybe(function(bJ){var bK,bL;bK=bE(bH);return bK!=null&&bK.$==1&&(!G.Equals(bK.$0,bJ)&&(bL=[bK,bK.$0],true))?bL[0]:null;});}function bG(bH,bI){var bJ,bK;bJ=bE(bH);return bJ!=null&&bJ.$==1&&(G.Equals(bJ.$0,bI)&&(bK=bJ.$0,true))?null:bD(bH,bI);}return r.Concat([s.Handler("change",function(bH){return function(bI){return bF(bH,bI);};}),s.Handler("input",function(bH){return function(bI){return bF(bH,bI);};}),s.Handler("keypress",function(bH){return function(bI){return bF(bH,bI);};}),s.DynamicCustom(function(bH){return function(bI){return bG(bH,bI);};},bC.get_View())]);};s.Handler=function(bC,bD){return A.Static(function(bE){bE.addEventListener(bC,function(bF){return(bD(bE))(bF);},false);});};u.LoadLocalTemplates=function(bC){!u.LocalTemplatesLoaded()?(u.set_LocalTemplatesLoaded(true),u.LoadNestedTemplates(self.document.body,"")):void 0;u.LoadedTemplates().set_Item(bC,u.LoadedTemplateFile(""));};u.LocalTemplatesLoaded=function(){K.$cctor();return K.LocalTemplatesLoaded;};u.set_LocalTemplatesLoaded=function(bC){K.$cctor();K.LocalTemplatesLoaded=bC;};u.LoadNestedTemplates=function(bC,bD){var bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS;function bE(bT){var bU,bV;if(!bF.ContainsKey(bT)){bU=(bV=null,[bG.TryGetValue(bT,{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);bU[0]?(bS.Add(bT),bG.Remove(bT),u.PrepareTemplateStrict(bD,{$:1,$0:bT},bU[1][0],{$:1,$0:bU[1][1]},{$:1,$0:bE})):bz.warn(bS.Contains(bT)?"Encountered loop when instantiating "+bT:"Local template does not exist: "+bT);}}bF=u.LoadedTemplateFile(bD);bG=new F.New$5();bH=bC.querySelectorAll("[ws-template]");for(bI=0,bJ=bH.length-1;bI<=bJ;bI++){bK=bH[bI];bL=bK.getAttribute("ws-template").toLowerCase();bK.removeAttribute("ws-template");bG.set_Item(bL,[[bK],u.FakeRootSingle(bK)]);}bM=bC.querySelectorAll("[ws-children-template]");for(bN=0,bO=bM.length-1;bN<=bO;bN++){bP=bM[bN];bQ=bP.getAttribute("ws-children-template").toLowerCase();bP.removeAttribute("ws-children-template");bG.set_Item(bQ,(bR=y.ChildrenArray(bP),[bR,u.FakeRoot(bR)]));}bS=new M.New$3();while(bG.count>0)bE(z.head(bG.get_Keys()));};u.LoadedTemplates=function(){K.$cctor();return K.LoadedTemplates;};u.LoadedTemplateFile=function(bC){var bD,bE,bF;bD=(bE=null,[u.LoadedTemplates().TryGetValue(bC,{get:function(){return bE;},set:function(bG){bE=bG;}}),bE]);return bD[0]?bD[1]:(bF=new F.New$5(),(u.LoadedTemplates().set_Item(bC,bF),bF));};u.FakeRootSingle=function(bC){var bD,bE,bF;bC.removeAttribute("ws-template");bD=bC.getAttribute("ws-replace");bD===null?void 0:(bC.removeAttribute("ws-replace"),bE=bC.parentNode,G.Equals(bE,null)?void 0:(bF=self.document.createElement(bC.tagName),bF.setAttribute("ws-replace",bD),bE.replaceChild(bF,bC)));return u.FakeRoot([bC]);};u.FakeRoot=function(bC){var bD,bE,bF;bD=self.document.createElement("div");for(bE=0,bF=bC.length-1;bE<=bF;bE++)bD.appendChild(L.get(bC,bE));return bD;};u.PrepareTemplateStrict=function(bC,bD,bE,bF,bG){var bH,bI;function bJ(bO,bP){var bQ,bR,bS,bT,bU,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce;function bV(cf){}while(true)switch(bO){case 0:if(bP!==null){bQ=bP.nextSibling;if(G.Equals(bP.nodeType,C.TEXT_NODE))X.convertTextNode(bP);else if(G.Equals(bP.nodeType,C.ELEMENT_NODE))bL(bP);bP=bQ;}else return null;break;case 1:bW=Y.string(bP.nodeName,{$:1,$0:3},null).toLowerCase();bX=(bR=bW.indexOf("."),bR===-1?[bC,bW]:[Y.string(bW,null,{$:1,$0:bR-1}),Y.string(bW,{$:1,$0:bR+1},null)]);bY=bX[1];bZ=bX[0];if(bZ!==""&&!u.LoadedTemplates().ContainsKey(bZ))return X.failNotLoaded(bY);else{if(bZ===""&&bG!=null)bG.$0(bY);b0=u.LoadedTemplates().get_Item(bZ);if(!b0.ContainsKey(bY))return X.failNotLoaded(bY);else{b1=b0.get_Item(bY);b2=b1.cloneNode(true);b3=new M.New$3();b4=new F.New$5();b5=bP.attributes;for(b6=0,b7=b5.length-1;b6<=b7;b6++){b8=b5.item(b6).name.toLowerCase();b4.set_Item(b8,(b9=b5.item(b6).nodeValue,b9===""?b8:b9.toLowerCase()));!b3.Add(b8)?bz.warn("Hole mapped twice",b8):void 0;}for(b_=0,b$=bP.childNodes.length-1;b_<=b$;b_++){ca=bP.childNodes[b_];G.Equals(ca.nodeType,C.ELEMENT_NODE)?!b3.Add(ca.nodeName.toLowerCase())?bz.warn("Hole filled twice",bY):void 0:void 0;}cb=bP.childNodes.length===1&&G.Equals(bP.firstChild.nodeType,C.TEXT_NODE);if(cb){bT=X.fillTextHole(b2,bP.firstChild.textContent,bY);((function(cf){return function(cg){if(cg!=null)cf(cg.$0);};}((bU=function(cf){return function(cg){return cf.Add(cg);};}(b3),function(cf){return bV(bU(cf));})))(bT));}X.removeHolesExcept(b2,b3);if(!cb){for(cc=0,cd=bP.childNodes.length-1;cc<=cd;cc++){ce=bP.childNodes[cc];G.Equals(ce.nodeType,C.ELEMENT_NODE)?ce.hasAttributes()?X.fillInstanceAttrs(b2,ce):bK(b2,ce):void 0;}}X.mapHoles(b2,b4);X.fill(b2,bP.parentNode,bP);bP.parentNode.removeChild(bP);return;}}break;}}function bK(bO,bP){var bQ,bS,bT;function bR(bU,bV){var bW,bX,bY;if(bS==="title"&&bP.hasChildNodes()){bW=bA.parseHTML(bP.textContent);bP.removeChild(bP.firstChild);for(bX=0,bY=bW.length-1;bX<=bY;bX++)bP.appendChild(L.get(bW,bX));}else null;bL(bP);return X.fill(bP,bU,bV);}bS=bP.nodeName.toLowerCase();y.IterSelector(bO,"[ws-attr-holes]",function(bU){var bV,bW,bX,bY,bZ;bV=_8.SplitChars(bU.getAttribute("ws-attr-holes"),[" "],1);for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=L.get(bV,bW);bU.setAttribute(bY,(bZ=new a.RegExp("\\${"+bS+"}","ig"),bU.getAttribute(bY).replace(bZ,bP.textContent)));}});bT=bO.querySelector("[ws-hole="+bS+"]");if(G.Equals(bT,null)){bQ=bO.querySelector("[ws-replace="+bS+"]");return G.Equals(bQ,null)?null:(bR(bQ.parentNode,bQ),void bQ.parentNode.removeChild(bQ));}else{while(bT.hasChildNodes())bT.removeChild(bT.lastChild);bT.removeAttribute("ws-hole");return bR(bT,null);}}function bL(bO){if(_8.StartsWith(bO.nodeName.toLowerCase(),"ws-"))bN(bO);else{X.convertAttrs(bO);bM(bO.firstChild);}}function bM(bO){return bJ(0,bO);}function bN(bO){return bJ(1,bO);}bH=bF==null?u.FakeRoot(bE):bF.$0;bI=(bD==null?"":bD.$0).toLowerCase();u.LoadedTemplateFile(bC).set_Item(bI,bH);L.length(bE)>0?(function(bO){var bP,bQ,bR,bS;while(true){bP=bO.querySelector("[ws-template]");if(G.Equals(bP,null)){bQ=bO.querySelector("[ws-children-template]");if(G.Equals(bQ,null))return null;else{bR=bQ.getAttribute("ws-children-template");bQ.removeAttribute("ws-children-template");u.PrepareTemplateStrict(bC,{$:1,$0:bR},y.ChildrenArray(bQ),null,null);bO=bO;}}else{bS=bP.getAttribute("ws-template");(u.PrepareSingleTemplate(bC,{$:1,$0:bS},bP))(null);bO=bO;}}}(bH),bM(L.get(bE,0))):void 0;};u.PrepareSingleTemplate=function(bC,bD,bE){var bF,bG,bH;bF=u.FakeRootSingle(bE);bG=[bE];bH={$:1,$0:bF};return function(bI){u.PrepareTemplateStrict(bC,bD,bG,bH,bI);};};u.TextHoleRE=function(){K.$cctor();return K.TextHoleRE;};w.Int=function(){w.set_counter(w.counter()+1);return w.counter();};w.set_counter=function(bC){Q.$cctor();Q.counter=bC;};w.counter=function(){Q.$cctor();return Q.counter;};x.Const=function(bC){var bD;bD=n.New({$:0,$0:bC});return function(){return bD;};};x.Map=function(bC,bD){return x.CreateLazy(function(){return n.Map(bC,bD());});};x.Sink=function(bC,bD){function bE(){n.WhenRun(bD(),bC,function(){be.scheduler().Fork(bE);});}be.scheduler().Fork(bE);};x.Map2Unit=function(bC,bD){return x.CreateLazy(function(){return n.Map2Unit(bC(),bD());});};x.CreateLazy=function(bC){var bD;bD={c:null,o:bC};return function(){var bE,bF;bE=bD.c;return bE===null?(bE=bD.o(),bD.c=bE,(bF=bE.s,bF!=null&&bF.$==0)?bD.o=null:n.WhenObsoleteRun(bE,function(){bD.c=null;}),bE):bE;};};y.CreateText=function(bC){return y.Doc().createTextNode(bC);};y.SetAttr=function(bC,bD,bE){bC.setAttribute(bD,bE);};y.Doc=function(){O.$cctor();return O.Doc;};y.CreateElement=function(bC){return y.Doc().createElement(bC);};y.ChildrenArray=function(bC){var bD,bE,bF;bD=[];for(bE=0,bF=bC.childNodes.length-1;bE<=bF;bE++)bD.push(bC.childNodes[bE]);return bD;};y.IterSelector=function(bC,bD,bE){var bF,bG,bH;bF=bC.querySelectorAll(bD);for(bG=0,bH=bF.length-1;bG<=bH;bG++)bE(bF[bG]);};y.InsertAt=function(bC,bD,bE){var bF;if(!(bE.parentNode===bC&&bD===(bF=bE.nextSibling,G.Equals(bF,null)?null:bF)))bC.insertBefore(bE,bD);};y.RemoveNode=function(bC,bD){if(bD.parentNode===bC)bC.removeChild(bD);};z.append=function(bC,bD){return{GetEnumerator:function(){var bE,bF;bE=H.Get(bC);bF=[true];return new I.New(bE,null,function(bG){var bH;return bG.s.MoveNext()?(bG.c=bG.s.Current(),true):(bH=bG.s,!G.Equals(bH,null)?bH.Dispose():void 0,bG.s=null,bF[0]&&(bF[0]=false,bG.s=H.Get(bD),bG.s.MoveNext()?(bG.c=bG.s.Current(),true):(bG.s.Dispose(),bG.s=null,false)));},function(bG){var bH;bH=bG.s;!G.Equals(bH,null)?bH.Dispose():void 0;});}};};z.head=function(bC){var bD;bD=H.Get(bC);try{return bD.MoveNext()?bD.Current():z.insufficient();}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}};z.fold=function(bC,bD,bE){var bF,bG;bF=bD;bG=H.Get(bE);try{while(bG.MoveNext())bF=bC(bF,bG.Current());return bF;}finally{if(typeof bG=="object"&&"Dispose"in bG)bG.Dispose();}};z.iter=function(bC,bD){var bE;bE=H.Get(bD);try{while(bE.MoveNext())bC(bE.Current());}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}};z.map=function(bC,bD){return{GetEnumerator:function(){var bE;bE=H.Get(bD);return new I.New(null,null,function(bF){return bE.MoveNext()&&(bF.c=bC(bE.Current()),true);},function(){bE.Dispose();});}};};z.max=function(bC){var bD,bE,bF;bD=H.Get(bC);try{if(!bD.MoveNext())z.seqEmpty();bE=bD.Current();while(bD.MoveNext()){bF=bD.Current();G.Compare(bF,bE)===1?bE=bF:void 0;}return bE;}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}};z.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};A.Static=function(bC){return new r({$:3,$0:bC});};A.Dynamic=function(bC,bD){return new r({$:1,$0:new J.New(bC,bD)});};A.Updates=function(bC){return S.MapTreeReduce(function(bD){return bD.NChanged();},x.Const(),x.Map2Unit,bC.DynNodes);};A.AppendTree=function(bC,bD){var bE;return bC===null?bD:bD===null?bC:(bE=new r({$:2,$0:bC,$1:bD}),(A.SetFlags(bE,A.Flags(bC)|A.Flags(bD)),bE));};A.EmptyAttr=function(){bc.$cctor();return bc.EmptyAttr;};A.Insert=function(bC,bD){var bE,bF,bG;function bH(bI){if(!(bI===null))if(bI!=null&&bI.$==1)bE.push(bI.$0);else if(bI!=null&&bI.$==2){bH(bI.$0);bH(bI.$1);}else if(bI!=null&&bI.$==3)bI.$0(bC);else if(bI!=null&&bI.$==4)bF.push(bI.$0);}bE=[];bF=[];bH(bD);bG=bE.slice(0);return _7.New(bC,A.Flags(bD),bG,bF.length===0?null:{$:1,$0:function(bI){z.iter(function(bJ){bJ(bI);},bF);}});};A.SetFlags=function(bC,bD){bC.flags=bD;};A.Flags=function(bC){return bC!==null&&bC.hasOwnProperty("flags")?bC.flags:0;};A.HasExitAnim=function(bC){var bD;bD=2;return(bC.DynFlags&bD)===bD;};A.GetExitAnim=function(bC){return A.GetAnim(bC,function(bD,bE){return bD.NGetExitAnim(bE);});};A.HasEnterAnim=function(bC){var bD;bD=1;return(bC.DynFlags&bD)===bD;};A.GetEnterAnim=function(bC){return A.GetAnim(bC,function(bD,bE){return bD.NGetEnterAnim(bE);});};A.HasChangeAnim=function(bC){var bD;bD=4;return(bC.DynFlags&bD)===bD;};A.GetChangeAnim=function(bC){return A.GetAnim(bC,function(bD,bE){return bD.NGetChangeAnim(bE);});};A.GetAnim=function(bC,bD){return _0.Concat(L.map(function(bE){return bD(bE,bC.DynElem);},bC.DynNodes));};A.Sync=function(bC,bD){L.iter(function(bE){bE.NSync(bC);},bD.DynNodes);};D.GetFieldValues=function(bC){var bD,bE;bD=[];for(var bF in bC)bD.push(bC[bF]);return bD;};F=E.Dictionary=by.Class({set_Item:function(bC,bD){this.set(bC,bD);},ContainsKey:function(bC){var bD,bE;bD=this;bE=this.data[this.hash(bC)];return bE==null?false:L.exists(function(bF){return bD.equals.apply(null,[(i.KeyValue(bF))[0],bC]);},bE);},TryGetValue:function(bC,bD){var bE,bF,bG;bE=this;bF=this.data[this.hash(bC)];return bF==null?false:(bG=L.tryPick(function(bH){var bI;bI=i.KeyValue(bH);return bE.equals.apply(null,[bI[0],bC])?{$:1,$0:bI[1]}:null;},bF),bG!=null&&bG.$==1&&(bD.set(bG.$0),true));},Remove:function(bC){return this.remove(bC);},get_Keys:function(){return new Z.New(this);},set:function(bC,bD){var bE,bF,bG,bH;bE=this;bF=this.hash(bC);bG=this.data[bF];bG==null?(this.count=this.count+1,this.data[bF]=new a.Array({K:bC,V:bD})):(bH=L.tryFindIndex(function(bI){return bE.equals.apply(null,[(i.KeyValue(bI))[0],bC]);},bG),bH==null?(this.count=this.count+1,bG.push({K:bC,V:bD})):bG[bH.$0]={K:bC,V:bD});},remove:function(bC){var bD,bE,bF,bG;bD=this;bE=this.hash(bC);bF=this.data[bE];return bF==null?false:(bG=L.filter(function(bH){return!bD.equals.apply(null,[(i.KeyValue(bH))[0],bC]);},bF),L.length(bG)<bF.length&&(this.count=this.count-1,this.data[bE]=bG,true));},get_Item:function(bC){return this.get(bC);},get:function(bC){var bD,bE;bD=this;bE=this.data[this.hash(bC)];return bE==null?V.notPresent():L.pick(function(bF){var bG;bG=i.KeyValue(bF);return bD.equals.apply(null,[bG[0],bC])?{$:1,$0:bG[1]}:null;},bE);},GetEnumerator:function(){return H.Get0(this);},GetEnumerator0:function(){return H.Get0(L.concat(D.GetFieldValues(this.data)));}},f,F);F.New$5=by.Ctor(function(){F.New$6.call(this,[],G.Equals,G.Hash);},F);F.New$6=by.Ctor(function(bC,bD,bE){var bF,bG;f.New.call(this);this.equals=bD;this.hash=bE;this.count=0;this.data=[];bF=H.Get(bC);try{while(bF.MoveNext()){bG=bF.Current();this.set(bG.K,bG.V);}}finally{if(typeof bF=="object"&&"Dispose"in bF)bF.Dispose();}},F);G.Equals=function(bC,bD){var bE,bF,bG,bH;if(bC===bD)return true;else{bE=typeof bC;if(bE=="object"){if(bC===null||bC===void 0||bD===null||bD===void 0)return false;else if("Equals"in bC)return bC.Equals(bD);else if(bC instanceof a.Array&&bD instanceof a.Array)return G.arrayEquals(bC,bD);else if(bC instanceof a.Date&&bD instanceof a.Date)return G.dateEquals(bC,bD);else{bF=[true];for(var bI in bC)if(function(bJ){bF[0]=!bC.hasOwnProperty(bJ)||bD.hasOwnProperty(bJ)&&G.Equals(bC[bJ],bD[bJ]);return!bF[0];}(bI))break;if(bF[0]){for(var bJ in bD)if(function(bK){bF[0]=!bD.hasOwnProperty(bK)||bC.hasOwnProperty(bK);return!bF[0];}(bJ))break;}return bF[0];}}else return bE=="function"&&("$Func"in bC?bC.$Func===bD.$Func&&bC.$Target===bD.$Target:"$Invokes"in bC&&"$Invokes"in bD&&G.arrayEquals(bC.$Invokes,bD.$Invokes));}};G.arrayEquals=function(bC,bD){var bE,bF;if(L.length(bC)===L.length(bD)){bE=true;bF=0;while(bE&&bF<L.length(bC)){!G.Equals(L.get(bC,bF),L.get(bD,bF))?bE=false:void 0;bF=bF+1;}return bE;}else return false;};G.dateEquals=function(bC,bD){return bC.getTime()===bD.getTime();};G.Hash=function(bC){var bD;bD=typeof bC;return bD=="function"?0:bD=="boolean"?bC?1:0:bD=="number"?bC:bD=="string"?G.hashString(bC):bD=="object"?bC==null?0:bC instanceof a.Array?G.hashArray(bC):G.hashObject(bC):0;};G.hashString=function(bC){var bD,bE,bF;if(bC===null)return 0;else{bD=5381;for(bE=0,bF=bC.length-1;bE<=bF;bE++)bD=G.hashMix(bD,bC[bE].charCodeAt());return bD;}};G.hashArray=function(bC){var bD,bE,bF;bD=-34948909;for(bE=0,bF=L.length(bC)-1;bE<=bF;bE++)bD=G.hashMix(bD,G.Hash(L.get(bC,bE)));return bD;};G.hashObject=function(bC){var bD,bE;if("GetHashCode"in bC)return bC.GetHashCode();else{bD=[0];for(var bF in bC)if(function(bG){bD[0]=G.hashMix(G.hashMix(bD[0],G.hashString(bG)),G.Hash(bC[bG]));return false;}(bF))break;return bD[0];}};G.hashMix=function(bC,bD){return(bC<<5)+bC+bD;};G.Compare=function(bC,bD){var bE,bF,bG,bH,bI,bJ;if(bC===bD)return 0;else{bF=typeof bC;switch(bF=="function"?1:bF=="boolean"?2:bF=="number"?2:bF=="string"?2:bF=="object"?3:0){case 0:return typeof bD=="undefined"?0:-1;case 1:return i.FailWith("Cannot compare function values.");case 2:return bC<bD?-1:1;case 3:if(bC===null)bG=-1;else if(bD===null)bG=1;else if("CompareTo"in bC)bG=bC.CompareTo(bD);else if("CompareTo0"in bC)bG=bC.CompareTo0(bD);else if(bC instanceof a.Array&&bD instanceof a.Array)bG=G.compareArrays(bC,bD);else if(bC instanceof a.Date&&bD instanceof a.Date)bG=G.compareDates(bC,bD);else{bH=[0];for(var bK in bC)if(function(bL){return!bC.hasOwnProperty(bL)?false:!bD.hasOwnProperty(bL)?(bH[0]=1,true):(bH[0]=G.Compare(bC[bL],bD[bL]),bH[0]!==0);}(bK))break;if(bH[0]===0){for(var bL in bD)if(function(bM){return!bD.hasOwnProperty(bM)?false:!bC.hasOwnProperty(bM)&&(bH[0]=-1,true);}(bL))break;}bG=bH[0];}return bG;}}};G.compareArrays=function(bC,bD){var bE,bF;if(L.length(bC)<L.length(bD))return -1;else if(L.length(bC)>L.length(bD))return 1;else{bE=0;bF=0;while(bE===0&&bF<L.length(bC)){bE=G.Compare(L.get(bC,bF),L.get(bD,bF));bF=bF+1;}return bE;}};G.compareDates=function(bC,bD){return G.Compare(bC.getTime(),bD.getTime());};n.Obsolete=function(bC){var bD,bE,bF,bG,bH;bE=bC.s;if(bE==null||(bE!=null&&bE.$==2?(bD=bE.$1,false):bE!=null&&bE.$==3?(bD=bE.$1,false):true))void 0;else{bC.s=null;for(bF=0,bG=L.length(bD)-1;bF<=bG;bF++){bH=L.get(bD,bF);typeof bH=="object"?function(bI){n.Obsolete(bI);}(bH):bH();}}};n.New=function(bC){return{s:bC};};x=g.View=by.Class({},null,x);H.Get=function(bC){return bC instanceof a.Array?H.ArrayEnumerator(bC):G.Equals(typeof bC,"string")?H.StringEnumerator(bC):bC.GetEnumerator();};H.ArrayEnumerator=function(bC){return new I.New(0,null,function(bD){var bE;bE=bD.s;return bE<L.length(bC)&&(bD.c=L.get(bC,bE),bD.s=bE+1,true);},void 0);};H.StringEnumerator=function(bC){return new I.New(0,null,function(bD){var bE;bE=bD.s;return bE<bC.length&&(bD.c=bC[bE],bD.s=bE+1,true);},void 0);};H.Get0=function(bC){return bC instanceof a.Array?H.ArrayEnumerator(bC):G.Equals(typeof bC,"string")?H.StringEnumerator(bC):"GetEnumerator0"in bC?bC.GetEnumerator0():bC.GetEnumerator();};I=H.T=by.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,I);I.New=by.Ctor(function(bC,bD,bE,bF){f.New.call(this);this.s=bC;this.c=bD;this.n=bE;this.d=bF;},I);J=g.DynamicAttrNode=by.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bC){return _0.get_Empty();},NGetEnterAnim:function(bC){return _0.get_Empty();},NGetChangeAnim:function(bC){return _0.get_Empty();},NSync:function(bC){if(this.dirty){(this.push(bC))(this.value);this.dirty=false;}}},f,J);J.New=by.Ctor(function(bC,bD){var bE;bE=this;f.New.call(this);this.push=bD;this.value=void 0;this.dirty=false;this.updates=x.Map(function(bF){bE.value=bF;bE.dirty=true;},bC);},J);K.$cctor=function(){K.$cctor=a.ignore;K.LoadedTemplates=new F.New$5();K.LocalTemplatesLoaded=false;K.TextHoleRE="\\${([^}]+)}";};L.get=function(bC,bD){L.checkBounds(bC,bD);return bC[bD];};L.checkBounds=function(bC,bD){if(bD<0||bD>=bC.length)i.FailWith("Index was outside the bounds of the array.");};L.length=function(bC){return bC.dims===2?bC.length*bC.length:bC.length;};L.set=function(bC,bD,bE){L.checkBounds(bC,bD);bC[bD]=bE;};M=E.HashSet=by.Class({Add:function(bC){return this.add(bC);},Contains:function(bC){var bD;bD=this.data[this.hash(bC)];return bD==null?false:this.arrContains(bC,bD);},add:function(bC){var bD,bE;bD=this.hash(bC);bE=this.data[bD];return bE==null?(this.data[bD]=[bC],this.count=this.count+1,true):this.arrContains(bC,bE)?false:(bE.push(bC),this.count=this.count+1,true);},arrContains:function(bC,bD){var bE,bF,bG,bH;bE=true;bF=0;bH=bD.length;while(bE&&bF<bH)if(this.equals.apply(null,[bD[bF],bC]))bE=false;else bF=bF+1;return!bE;},ExceptWith:function(bC){var bD;bD=H.Get(bC);try{while(bD.MoveNext())this.Remove(bD.Current());}finally{if(typeof bD=="object"&&"Dispose"in bD)bD.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bC){var bD,bE,bF,bG;bD=0;bE=bl.concat(this.data);for(bF=0,bG=bE.length-1;bF<=bG;bF++)L.set(bC,bF,bE[bF]);},IntersectWith:function(bC){var bD,bE,bF,bG,bH;bD=new M.New$4(bC,this.equals,this.hash);bE=bl.concat(this.data);for(bF=0,bG=bE.length-1;bF<=bG;bF++){bH=bE[bF];!bD.Contains(bH)?this.Remove(bH):void 0;}},Remove:function(bC){var bD;bD=this.data[this.hash(bC)];return bD==null?false:this.arrRemove(bC,bD)&&(this.count=this.count-1,true);},arrRemove:function(bC,bD){var bE,bF,bG,bH;bE=true;bF=0;bH=bD.length;while(bE&&bF<bH)if(this.equals.apply(null,[bD[bF],bC])){bD.splice.apply(bD,[bF,1]);bE=false;}else bF=bF+1;return!bE;},GetEnumerator:function(){return H.Get(bl.concat(this.data));},GetEnumerator0:function(){return H.Get(bl.concat(this.data));}},f,M);M.New$3=by.Ctor(function(){M.New$4.call(this,[],G.Equals,G.Hash);},M);M.New$4=by.Ctor(function(bC,bD,bE){var bF;f.New.call(this);this.equals=bD;this.hash=bE;this.data=[];this.count=0;bF=H.Get(bC);try{while(bF.MoveNext())this.add(bF.Current());}finally{if(typeof bF=="object"&&"Dispose"in bF)bF.Dispose();}},M);M.New$2=by.Ctor(function(bC){M.New$4.call(this,bC,G.Equals,G.Hash);},M);O.$cctor=function(){O.$cctor=a.ignore;O.Doc=self.document;};P.LinkElement=function(bC,bD){P.InsertDoc(bC,bD,null);};P.InsertDoc=function(bC,bD,bE){var bF;return bD!=null&&bD.$==1?P.InsertNode(bC,bD.$0.El,bE):bD!=null&&bD.$==2?(bF=bD.$0,(bF.Dirty=false,P.InsertDoc(bC,bF.Current,bE))):bD==null?bE:bD!=null&&bD.$==4?P.InsertNode(bC,bD.$0.Text,bE):bD!=null&&bD.$==5?P.InsertNode(bC,bD.$0,bE):bD!=null&&bD.$==6?L.foldBack(function(bG,bH){return bG==null||bG.constructor===W?P.InsertDoc(bC,bG,bH):P.InsertNode(bC,bG,bH);},bD.$0.Els,bE):P.InsertDoc(bC,bD.$0,P.InsertDoc(bC,bD.$1,bE));};P.CreateRunState=function(bC,bD){return _.New($.get_Empty(),P.CreateElemNode(bC,A.EmptyAttr(),bD));};P.PerformAnimatedUpdate=function(bC,bD,bE){var bF;return _0.get_UseAnimations()?(bF=null,be.Delay(function(){var bG,bH,bI;bG=$.FindAll(bE);bH=P.ComputeChangeAnim(bD,bG);bI=P.ComputeEnterAnim(bD,bG);return be.Bind(_0.Play(_0.Append(bH,P.ComputeExitAnim(bD,bG))),function(){return be.Bind(P.SyncElemNodesNextFrame(bC,bD),function(){return be.Bind(_0.Play(bI),function(){bD.PreviousNodes=bG;return be.Return(null);});});});})):P.SyncElemNodesNextFrame(bC,bD);};P.PerformSyncUpdate=function(bC,bD,bE){var bF;bF=$.FindAll(bE);P.SyncElemNode(bC,bD.Top);bD.PreviousNodes=bF;};P.CreateElemNode=function(bC,bD,bE){var bF;P.LinkElement(bC,bE);bF=A.Insert(bC,bD);return T.New(bF,bE,null,bC,w.Int(),by.GetOptional(bF.OnAfterRender));};P.InsertNode=function(bC,bD,bE){y.InsertAt(bC,bE,bD);return bD;};P.SyncElemNodesNextFrame=function(bC,bD){function bE(bF){a.requestAnimationFrame(function(){P.SyncElemNode(bC,bD.Top);bF();});}return _1.BatchUpdatesEnabled()?be.FromContinuations(function(bF,bG,bH){return bE.apply(null,[bF,bG,bH]);}):(P.SyncElemNode(bC,bD.Top),be.Return(null));};P.ComputeExitAnim=function(bC,bD){return _0.Concat(L.map(function(bE){return A.GetExitAnim(bE.Attr);},$.ToArray($.Except(bD,$.Filter(function(bE){return A.HasExitAnim(bE.Attr);},bC.PreviousNodes)))));};P.ComputeEnterAnim=function(bC,bD){return _0.Concat(L.map(function(bE){return A.GetEnterAnim(bE.Attr);},$.ToArray($.Except(bC.PreviousNodes,$.Filter(function(bE){return A.HasEnterAnim(bE.Attr);},bD)))));};P.ComputeChangeAnim=function(bC,bD){var bE;function bF(bG){return A.HasChangeAnim(bG.Attr);}bE=function(bG){return $.Filter(bF,bG);};return _0.Concat(L.map(function(bG){return A.GetChangeAnim(bG.Attr);},$.ToArray($.Intersect(bE(bC.PreviousNodes),bE(bD)))));};P.SyncElemNode=function(bC,bD){!bC?P.SyncElement(bD):void 0;P.Sync(bD.Children);P.AfterRender(bD);};P.SyncElement=function(bC){function bD(bE){function bF(bG){var bH,bI;return bG!=null&&bG.$==0?bF(bG.$0)||bF(bG.$1):bG!=null&&bG.$==2?(bH=bG.$0,bH.Dirty||bF(bH.Current)):bG!=null&&bG.$==6&&(bI=bG.$0,bI.Dirty||L.exists(bD,bI.Holes));}return bF(bE.Children);}A.Sync(bC.El,bC.Attr);bD(bC)?P.DoSyncElement(bC):void 0;};P.Sync=function(bC){var bD,bE;if(bC!=null&&bC.$==1)P.SyncElemNode(false,bC.$0);else if(bC!=null&&bC.$==2)P.Sync(bC.$0.Current);else if(bC==null);else if(bC!=null&&bC.$==5);else if(bC!=null&&bC.$==4){bD=bC.$0;bD.Dirty?(bD.Text.nodeValue=bD.Value,bD.Dirty=false):void 0;}else if(bC!=null&&bC.$==6){bE=bC.$0;L.iter(function(bF){P.SyncElemNode(false,bF);},bE.Holes);L.iter(function(bF){A.Sync(bF[0],bF[1]);},bE.Attrs);P.AfterRender(bE);}else{P.Sync(bC.$0);P.Sync(bC.$1);}};P.AfterRender=function(bC){var bD;bD=by.GetOptional(bC.Render);bD!=null&&bD.$==1?(bD.$0(bC.El),by.SetOptional(bC,"Render",null)):void 0;};P.DoSyncElement=function(bC){var bD,bE,bF;function bG(bH,bI){var bJ,bK;return bH!=null&&bH.$==1?bH.$0.El:bH!=null&&bH.$==2?(bJ=bH.$0,bJ.Dirty?(bJ.Dirty=false,P.InsertDoc(bD,bJ.Current,bI)):bG(bJ.Current,bI)):bH==null?bI:bH!=null&&bH.$==4?bH.$0.Text:bH!=null&&bH.$==5?bH.$0:bH!=null&&bH.$==6?(bK=bH.$0,(bK.Dirty?bK.Dirty=false:void 0,L.foldBack(function(bL,bM){return bL==null||bL.constructor===W?bG(bL,bM):bL;},bK.Els,bI))):bG(bH.$0,bG(bH.$1,bI));}bD=bC.El;bo.Iter((bE=bC.El,function(bH){y.RemoveNode(bE,bH);}),bo.Except(bo.DocChildren(bC),bo.Children(bC.El,by.GetOptional(bC.Delimiters))));bG(bC.Children,(bF=by.GetOptional(bC.Delimiters),bF!=null&&bF.$==1?bF.$0[1]:null));};Q.$cctor=function(){Q.$cctor=a.ignore;Q.counter=0;};R=g.Elt=by.Class({},o,R);R.New=function(bC,bD,bE){var bF,bG;bF=P.CreateElemNode(bC,bD,bE.docNode);bG=_3.Create(bE.updates);return new R.New$1({$:1,$0:bF},x.Map2Unit(A.Updates(bF.Attr),bG.v),bC,bG);};R.New$1=by.Ctor(function(bC,bD,bE,bF){o.New.call(this,bC,bD);this.docNode$1=bC;this.updates$1=bD;this.elt=bE;this.rvUpdates=bF;},R);S.ofSeqNonCopying=function(bC){var bD,bE;if(bC instanceof a.Array)return bC;else if(bC instanceof _5)return L.ofList(bC);else if(bC===null)return[];else{bD=[];bE=H.Get(bC);try{while(bE.MoveNext())bD.push(bE.Current());return bD;}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}}};S.TreeReduce=function(bC,bD,bE){var bF;function bG(bH,bI){var bJ,bK;return bI<=0?bC:bI===1&&(bH>=0&&bH<bF)?L.get(bE,bH):(bK=bI/2>>0,bD(bG(bH,bK),bG(bH+bK,bI-bK)));}bF=L.length(bE);return bG(0,bF);};S.MapTreeReduce=function(bC,bD,bE,bF){var bG;function bH(bI,bJ){var bK,bL;return bJ<=0?bD:bJ===1&&(bI>=0&&bI<bG)?bC(L.get(bF,bI)):(bL=bJ/2>>0,bE(bH(bI,bL),bH(bI+bL,bJ-bL)));}bG=L.length(bF);return bH(0,bG);};T=g.DocElemNode=by.Class({Equals:function(bC){return this.ElKey===bC.ElKey;},GetHashCode:function(){return this.ElKey;}},null,T);T.New=function(bC,bD,bE,bF,bG,bH){var bI;return new T((bI={Attr:bC,Children:bD,El:bF,ElKey:bG},(by.SetOptional(bI,"Delimiters",bE),by.SetOptional(bI,"Render",bH),bI)));};V.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};L.exists=function(bC,bD){var bE,bF,bG,bH;bE=false;bF=0;bH=L.length(bD);while(!bE&&bF<bH)if(bC(bD[bF]))bE=true;else bF=bF+1;return bE;};L.tryPick=function(bC,bD){var bE,bF,bG;bE=null;bF=0;while(bF<bD.length&&bE==null){bG=bC(bD[bF]);bG!=null&&bG.$==1?bE=bG:void 0;bF=bF+1;}return bE;};L.tryFindIndex=function(bC,bD){var bE,bF;bE=null;bF=0;while(bF<bD.length&&bE==null){bC(bD[bF])?bE={$:1,$0:bF}:void 0;bF=bF+1;}return bE;};L.ofList=function(bC){var bD,bE;bE=[];bD=bC;while(!(bD.$==0)){bE.push(_4.head(bD));bD=_4.tail(bD);}return bE;};L.filter=function(bC,bD){var bE,bF,bG;bE=[];for(bF=0,bG=bD.length-1;bF<=bG;bF++)if(bC(bD[bF]))bE.push(bD[bF]);return bE;};L.map=function(bC,bD){var bE,bF,bG;bE=new a.Array(bD.length);for(bF=0,bG=bD.length-1;bF<=bG;bF++)bE[bF]=bC(bD[bF]);return bE;};L.iter=function(bC,bD){var bE,bF;for(bE=0,bF=bD.length-1;bE<=bF;bE++)bC(bD[bE]);};L.foldBack=function(bC,bD,bE){var bF,bG,bH,bI,bJ;bF=bE;bH=bD.length;for(bI=1,bJ=bH;bI<=bJ;bI++)bF=bC(bD[bH-bI],bF);return bF;};L.pick=function(bC,bD){var bE;bE=L.tryPick(bC,bD);return bE==null?i.FailWith("KeyNotFoundException"):bE.$0;};L.ofSeq=function(bC){var bD,bE;if(bC instanceof a.Array)return bC.slice();else if(bC instanceof _5)return L.ofList(bC);else{bD=[];bE=H.Get(bC);try{while(bE.MoveNext())bD.push(bE.Current());return bD;}finally{if(typeof bE=="object"&&"Dispose"in bE)bE.Dispose();}}};L.choose=function(bC,bD){var bE,bF,bG,bH;bE=[];for(bF=0,bG=bD.length-1;bF<=bG;bF++){bH=bC(bD[bF]);bH==null?void 0:bE.push(bH.$0);}return bE;};L.concat=function(bC){return a.Array.prototype.concat.apply([],L.ofSeq(bC));};L.create=function(bC,bD){var bE,bF,bG;bE=new a.Array(bC);for(bF=0,bG=bC-1;bF<=bG;bF++)bE[bF]=bD;return bE;};L.init=function(bC,bD){var bE,bF,bG;bC<0?i.FailWith("Negative size given."):null;bE=new a.Array(bC);for(bF=0,bG=bC-1;bF<=bG;bF++)bE[bF]=bD(bF);return bE;};L.forall=function(bC,bD){var bE,bF,bG,bH;bE=true;bF=0;bH=L.length(bD);while(bE&&bF<bH)if(bC(bD[bF]))bF=bF+1;else bE=false;return bE;};X.convertTextNode=function(bC){var bD,bE,bF,bG,bH,bI;bD=null;bE=0;bG=bC.textContent;bH=new a.RegExp(u.TextHoleRE(),"g");while(bD=bH.exec(bG),bD!==null){bC.parentNode.insertBefore(self.document.createTextNode(Y.string(bG,{$:1,$0:bE},{$:1,$0:bH.lastIndex-L.get(bD,0).length-1})),bC);bE=bH.lastIndex;bI=self.document.createElement("span");bI.setAttribute("ws-replace",L.get(bD,1).toLowerCase());bC.parentNode.insertBefore(bI,bC);}bH.lastIndex=0;bC.textContent=Y.string(bG,{$:1,$0:bE},null);};X.failNotLoaded=function(bC){bz.warn("Instantiating non-loaded template",bC);};X.fillTextHole=function(bC,bD,bE){var bF;bF=bC.querySelector("[ws-replace]");return G.Equals(bF,null)?(bz.warn("Filling non-existent text hole",bE),null):(bF.parentNode.replaceChild(new a.Text(bD),bF),{$:1,$0:bF.getAttribute("ws-replace")});};X.removeHolesExcept=function(bC,bD){function bE(bF){y.IterSelector(bC,"["+bF+"]",function(bG){if(!bD.Contains(bG.getAttribute(bF)))bG.removeAttribute(bF);});}bE("ws-attr");bE("ws-onafterrender");bE("ws-var");y.IterSelector(bC,"[ws-hole]",function(bF){if(!bD.Contains(bF.getAttribute("ws-hole"))){bF.removeAttribute("ws-hole");while(bF.hasChildNodes())bF.removeChild(bF.lastChild);}});y.IterSelector(bC,"[ws-replace]",function(bF){if(!bD.Contains(bF.getAttribute("ws-replace")))bF.parentNode.removeChild(bF);});y.IterSelector(bC,"[ws-on]",function(bF){bF.setAttribute("ws-on",_8.concat(" ",L.filter(function(bG){return bD.Contains(L.get(_8.SplitChars(bG,[":"],1),1));},_8.SplitChars(bF.getAttribute("ws-on"),[" "],1))));});y.IterSelector(bC,"[ws-attr-holes]",function(bF){var bG,bH,bI,bJ,bK;bG=_8.SplitChars(bF.getAttribute("ws-attr-holes"),[" "],1);for(bH=0,bI=bG.length-1;bH<=bI;bH++){bJ=L.get(bG,bH);bF.setAttribute(bJ,(bK=new a.RegExp(u.TextHoleRE(),"g"),bF.getAttribute(bJ).replace(bK,function(bL,bM){return bD.Contains(bM)?bL:"";})));}});};X.fillInstanceAttrs=function(bC,bD){var bE,bF,bG,bH,bI;X.convertAttrs(bD);bE=bD.nodeName.toLowerCase();bF=bC.querySelector("[ws-attr="+bE+"]");if(G.Equals(bF,null))bz.warn("Filling non-existent attr hole",bE);else{bF.removeAttribute("ws-attr");for(bG=0,bH=bD.attributes.length-1;bG<=bH;bG++){bI=bD.attributes.item(bG);bI.name==="class"&&bF.hasAttribute("class")?bF.setAttribute("class",bF.getAttribute("class")+" "+bI.nodeValue):bF.setAttribute(bI.name,bI.nodeValue);}}};X.mapHoles=function(bC,bD){function bE(bF){y.IterSelector(bC,"["+bF+"]",function(bG){var bH,bI;bH=(bI=null,[bD.TryGetValue(bG.getAttribute(bF).toLowerCase(),{get:function(){return bI;},set:function(bJ){bI=bJ;}}),bI]);bH[0]?bG.setAttribute(bF,bH[1]):void 0;});}bE("ws-hole");bE("ws-replace");bE("ws-attr");bE("ws-onafterrender");bE("ws-var");y.IterSelector(bC,"[ws-on]",function(bF){bF.setAttribute("ws-on",_8.concat(" ",L.map(function(bG){var bH,bI,bJ;bH=_8.SplitChars(bG,[":"],1);bI=(bJ=null,[bD.TryGetValue(L.get(bH,1),{get:function(){return bJ;},set:function(bK){bJ=bK;}}),bJ]);return bI[0]?L.get(bH,0)+":"+bI[1]:bG;},_8.SplitChars(bF.getAttribute("ws-on"),[" "],1))));});y.IterSelector(bC,"[ws-attr-holes]",function(bF){var bG,bH,bI;bG=_8.SplitChars(bF.getAttribute("ws-attr-holes"),[" "],1);for(bH=0,bI=bG.length-1;bH<=bI;bH++)(function(){var bJ;function bK(bL,bM){var bN;bN=i.KeyValue(bM);return bL.replace(new a.RegExp("\\${"+bN[0]+"}","ig"),"${"+bN[1]+"}");}bJ=L.get(bG,bH);return bF.setAttribute(bJ,(((by.Curried3(z.fold))(bK))(bF.getAttribute(bJ)))(bD));}());});};X.fill=function(bC,bD,bE){while(true)if(bC.hasChildNodes())bE=bD.insertBefore(bC.lastChild,bE);else return null;};X.convertAttrs=function(bC){var bE,bF,bG,bH,bI,bJ,bK,bL;function bD(bM){var bN;bN=bC.getAttribute(bM);bN===null?void 0:bC.setAttribute(bM,bN.toLowerCase());}bE=bC.attributes;bF=[];bG=[];bH=[];for(bI=0,bJ=bE.length-1;bI<=bJ;bI++){bK=bE.item(bI);_8.StartsWith(bK.nodeName,"ws-on")&&bK.nodeName!=="ws-onafterrender"&&bK.nodeName!=="ws-on"?(bF.push(bK.nodeName),bG.push(Y.string(bK.nodeName,{$:1,$0:"ws-on".length},null)+":"+bK.nodeValue.toLowerCase())):!_8.StartsWith(bK.nodeName,"ws-")&&(new a.RegExp(u.TextHoleRE())).test(bK.nodeValue)?(bK.nodeValue=(bL=new a.RegExp(u.TextHoleRE(),"g"),bK.nodeValue.replace(bL,function(bM,bN){return"${"+bN.toLowerCase()+"}";})),bH.push(bK.nodeName)):void 0;}!(bG.length==0)?bC.setAttribute("ws-on",_8.concat(" ",bG)):void 0;!(bH.length==0)?bC.setAttribute("ws-attr-holes",_8.concat(" ",bH)):void 0;bD("ws-hole");bD("ws-replace");bD("ws-attr");bD("ws-onafterrender");bD("ws-var");L.iter(function(bM){bC.removeAttribute(bM);},bF);};Y.string=function(bC,bD,bE){return bD==null?bE!=null&&bE.$==1?bC.slice(0,bE.$0+1):"":bE==null?bC.slice(bD.$0):bC.slice(bD.$0,bE.$0+1);};z.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};Z=E.KeyCollection=by.Class({GetEnumerator$1:function(){return H.Get(z.map(function(bC){return bC.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,Z);Z.New=by.Ctor(function(bC){f.New.call(this);this.d=bC;},Z);_0.get_UseAnimations=function(){return ba.UseAnimations();};_0.Play=function(bC){var bD;bD=null;return be.Delay(function(){return be.Bind(_0.Run(a.ignore,ba.Actions(bC)),function(){ba.Finalize(bC);return be.Return(null);});});};_0.Append=function(bC,bD){return{$:0,$0:bf.Append(bC.$0,bD.$0)};};_0.Run=function(bC,bD){var bE;function bF(bG){function bH(bI,bJ){var bK;bK=bJ-bI;bD.Compute(bK);bC();return bK<=bE?void a.requestAnimationFrame(function(bL){bH(bI,bL);}):bG();}a.requestAnimationFrame(function(bI){bH(bI,bI);});}bE=bD.Duration;return bE===0?be.Zero():be.FromContinuations(function(bG,bH,bI){return bF.apply(null,[bG,bH,bI]);});};_0.Concat=function(bC){return{$:0,$0:bf.Concat(z.map(ba.List,bC))};};_0.get_Empty=function(){return{$:0,$0:bf.Empty()};};_1.BatchUpdatesEnabled=function(){bb.$cctor();return bb.BatchUpdatesEnabled;};_2.StartProcessor=function(bC){var bD;function bE(){var bF;bF=null;return be.Delay(function(){return be.Bind(bC,function(){var bG;bG=bD[0];return bG===1?(bD[0]=0,be.Zero()):bG===2?(bD[0]=1,bE()):be.Zero();});});}bD=[0];return function(){var bF;bF=bD[0];bF===0?(bD[0]=1,be.Start(bE(),null)):bF===1?bD[0]=2:void 0;};};_3=g.Updates=by.Class({},null,_3);_3.Create=function(bC){var bD;bD=null;bD=_3.New(bC,null,function(){var bE;bE=bD.s;return bE===null?(bE=n.Copy(bD.c()),bD.s=bE,n.WhenObsoleteRun(bE,function(){bD.s=null;}),bE):bE;});return bD;};_3.New=function(bC,bD,bE){return new _3({c:bC,s:bD,v:bE});};_5=_4.T=by.Class({GetEnumerator:function(){return new I.New(this,null,function(bC){var bD;bD=bC.s;return bD.$==0?false:(bC.c=bD.$0,bC.s=bD.$1,true);},void 0);},GetEnumerator0:function(){return H.Get(this);}},null,_5);_7.New=function(bC,bD,bE,bF){var bG;bG={DynElem:bC,DynFlags:bD,DynNodes:bE};by.SetOptional(bG,"OnAfterRender",bF);return bG;};_8.concat=function(bC,bD){return L.ofSeq(bD).join(bC);};_8.SplitChars=function(bC,bD,bE){return _8.Split(bC,new a.RegExp("["+_8.RegexEscape(bD.join(""))+"]"),bE);};_8.StartsWith=function(bC,bD){return bC.substring(0,bD.length)==bD;};_8.Split=function(bC,bD,bE){return bE===1?L.filter(function(bF){return bF!=="";},_8.SplitWith(bC,bD)):_8.SplitWith(bC,bD);};_8.RegexEscape=function(bC){return bC.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_8.SplitWith=function(bC,bD){return bC.split(bD);};_.New=function(bC,bD){return{PreviousNodes:bC,Top:bD};};$.get_Empty=function(){return{$:0,$0:new M.New$3()};};$.FindAll=function(bC){var bD;function bE(bG){if(bG!=null&&bG.$==0){bE(bG.$0);bE(bG.$1);}else if(bG!=null&&bG.$==1)bF(bG.$0);else if(bG!=null&&bG.$==2)bE(bG.$0.Current);else if(bG!=null&&bG.$==6)L.iter(bF,bG.$0.Holes);}function bF(bG){bD.push(bG);bE(bG.Children);}bD=[];bE(bC);return{$:0,$0:new M.New$2(bD)};};$.Filter=function(bC,bD){return{$:0,$0:bk.Filter(bC,bD.$0)};};$.Except=function(bC,bD){return{$:0,$0:bk.Except(bC.$0,bD.$0)};};$.ToArray=function(bC){return bk.ToArray(bC.$0);};$.Intersect=function(bC,bD){return{$:0,$0:bk.Intersect(bC.$0,bD.$0)};};ba.UseAnimations=function(){bd.$cctor();return bd.UseAnimations;};ba.Actions=function(bC){return ba.ConcatActions(L.choose(function(bD){return bD.$==1?{$:1,$0:bD.$0}:null;},bf.ToArray(bC.$0)));};ba.Finalize=function(bC){L.iter(function(bD){if(bD.$==0)bD.$0();},bf.ToArray(bC.$0));};ba.ConcatActions=function(bC){var bD,bE,bF,bG;bD=S.ofSeqNonCopying(bC);bE=L.length(bD);return bE===0?ba.Const():bE===1?L.get(bD,0):(bF=z.max(z.map(function(bH){return bH.Duration;},bD)),(bG=L.map(function(bH){return ba.Prolong(bF,bH);},bD),ba.Def(bF,function(bH){L.iter(function(bI){bI.Compute(bH);},bG);})));};ba.List=function(bC){return bC.$0;};ba.Const=function(bC){return ba.Def(0,function(){return bC;});};ba.Def=function(bC,bD){return{Compute:bD,Duration:bC};};ba.Prolong=function(bC,bD){var bE,bF,bG;bE=bD.Compute;bF=bD.Duration;bG=bs.Create(function(){return bD.Compute(bD.Duration);});return{Compute:function(bH){return bH>=bF?bG.f():bE(bH);},Duration:bC};};bb.$cctor=function(){bb.$cctor=a.ignore;bb.BatchUpdatesEnabled=true;};_4.head=function(bC){return bC.$==1?bC.$0:_4.listEmpty();};_4.tail=function(bC){return bC.$==1?bC.$1:_4.listEmpty();};_4.listEmpty=function(){return i.FailWith("The input list was empty.");};bc.$cctor=function(){bc.$cctor=a.ignore;bc.EmptyAttr=null;};bd.$cctor=function(){bd.$cctor=a.ignore;bd.CubicInOut=bg.Custom(function(bC){var bD;bD=bC*bC;return 3*bD-2*(bD*bC);});bd.UseAnimations=true;};be.Delay=function(bC){return function(bD){try{(bC(null))(bD);}catch(bE){bD.k({$:1,$0:bE});}};};be.Bind=function(bC,bD){return be.checkCancel(function(bE){bC(bh.New(function(bF){var bG;if(bF.$==0){bG=bF.$0;be.scheduler().Fork(function(){try{(bD(bG))(bE);}catch(bH){bE.k({$:1,$0:bH});}});}else be.scheduler().Fork(function(){bE.k(bF);});},bE.ct));});};be.Zero=function(){bi.$cctor();return bi.Zero;};be.Start=function(bC,bD){var bE,bF;bE=(bF=(be.defCTS())[0],bD==null?bF:bD.$0);be.scheduler().Fork(function(){if(!bE.c)bC(bh.New(function(bG){if(bG.$==1)be.UncaughtAsyncError(bG.$0);},bE));});};be.Return=function(bC){return function(bD){bD.k({$:0,$0:bC});};};be.checkCancel=function(bC){return function(bD){if(bD.ct.c)be.cancel(bD);else bC(bD);};};be.defCTS=function(){bi.$cctor();return bi.defCTS;};be.UncaughtAsyncError=function(bC){bz.log("WebSharper: Uncaught asynchronous exception",bC);};be.FromContinuations=function(bC){return function(bD){var bE;function bF(bG){if(bE[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bE[0]=true;be.scheduler().Fork(bG);}}bE=[false];bC(function(bG){bF(function(){bD.k({$:0,$0:bG});});},function(bG){bF(function(){bD.k({$:1,$0:bG});});},function(bG){bF(function(){bD.k({$:2,$0:bG});});});};};be.cancel=function(bC){bC.k({$:2,$0:new br.New(bC.ct)});};be.scheduler=function(){bi.$cctor();return bi.scheduler;};bf.Append=function(bC,bD){return bC.$==0?bD:bD.$==0?bC:{$:2,$0:bC,$1:bD};};bf.ToArray=function(bC){var bD;function bE(bF){if(bF.$==1)bD.push(bF.$0);else if(bF.$==2){bE(bF.$0);bE(bF.$1);}else if(bF.$==3)L.iter(function(bG){bD.push(bG);},bF.$0);}bD=[];bE(bC);return bD.slice(0);};bf.Concat=function(bC){var bD;bD=S.ofSeqNonCopying(bC);return S.TreeReduce(bf.Empty(),bf.Append,bD);};bf.Empty=function(){bt.$cctor();return bt.Empty;};bg=g.Easing=by.Class({},f,bg);bg.Custom=function(bC){return new bg.New(bC);};bg.New=by.Ctor(function(bC){f.New.call(this);this.transformTime=bC;},bg);bh.New=function(bC,bD){return{k:bC,ct:bD};};bi.$cctor=function(){bi.$cctor=a.ignore;bi.noneCT=bj.New(false,[]);bi.scheduler=new bm.New();bi.defCTS=[new bn.New()];bi.Zero=be.Return();bi.GetCT=function(bC){bC.k({$:0,$0:bC.ct});};};bj.New=function(bC,bD){return{c:bC,r:bD};};bk.Filter=function(bC,bD){return new M.New$2(L.filter(bC,bk.ToArray(bD)));};bk.Except=function(bC,bD){var bE;bE=new M.New$2(bk.ToArray(bD));bE.ExceptWith(bk.ToArray(bC));return bE;};bk.ToArray=function(bC){var bD;bD=L.create(bC.get_Count(),void 0);bC.CopyTo(bD);return bD;};bk.Intersect=function(bC,bD){var bE;bE=new M.New$2(bk.ToArray(bC));bE.IntersectWith(bk.ToArray(bD));return bE;};bl.concat=function(bC){var bD,bE;bD=[];for(var bF in bC)bD.push.apply(bD,bC[bF]);return bD;};bm=be.Scheduler=by.Class({Fork:function(bC){var bD;bD=this;this.robin.push(bC);this.idle?(this.idle=false,a.setTimeout(function(){bD.tick();},0)):void 0;},tick:function(){var bC,bD,bE;bD=this;bE=bB.now();bC=true;while(bC)if(this.robin.length===0){this.idle=true;bC=false;}else{(this.robin.shift())();bB.now()-bE>40?(a.setTimeout(function(){bD.tick();},0),bC=false):void 0;}}},f,bm);bm.New=by.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bm);bn=e.CancellationTokenSource=by.Class({},f,bn);bn.New=by.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bn);bo.Children=function(bC,bD){var bE,bF,bG;if(bD!=null&&bD.$==1){bG=[];bE=bD.$0[0].nextSibling;while(bE!==bD.$0[1]){bG.push(bE);bE=bE.nextSibling;}return{$:0,$0:bG};}else return{$:0,$0:L.init(bC.childNodes.length,(bF=bC.childNodes,function(bH){return bF[bH];}))};};bo.Except=function(bC,bD){var bE;bE=bC.$0;return{$:0,$0:L.filter(function(bF){return L.forall(function(bG){return!(bF===bG);},bE);},bD.$0)};};bo.Iter=function(bC,bD){L.iter(bC,bD.$0);};bo.DocChildren=function(bC){var bD;function bE(bF){if(bF!=null&&bF.$==2)bE(bF.$0.Current);else if(bF!=null&&bF.$==1)bD.push(bF.$0.El);else if(bF==null);else if(bF!=null&&bF.$==5)bD.push(bF.$0);else if(bF!=null&&bF.$==4)bD.push(bF.$0.Text);else if(bF!=null&&bF.$==6)L.iter(function(bG){if(bG==null||bG.constructor===W)bE(bG);else bD.push(bG);},bF.$0.Els);else{bE(bF.$0);bE(bF.$1);}}bD=[];bE(bC.Children);return{$:0,$0:S.ofSeqNonCopying(bD)};};bp.Clear=function(bC){bC.splice(0,L.length(bC));};br=e.OperationCanceledException=by.Class({},bq,br);br.New=by.Ctor(function(bC){br.New$1.call(this,"The operation was canceled.",null,bC);},br);br.New$1=by.Ctor(function(bC,bD,bE){this.message=bC;this.inner=bD;W.setPrototypeOf(this,br.prototype);this.ct=bE;},br);bs.Create=function(bC){return bv.New(false,bC,bs.forceLazy);};bs.forceLazy=function(){var bC;bC=this.v();this.c=true;this.v=bC;this.f=bs.cachedLazy;return bC;};bs.cachedLazy=function(){return this.v;};bt.$cctor=function(){bt.$cctor=a.ignore;bt.Empty={$:0};};bv.New=function(bC,bD,bE){return{c:bC,v:bD,f:bE};};by.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
